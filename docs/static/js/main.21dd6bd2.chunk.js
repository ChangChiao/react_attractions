(this["webpackJsonpreact-attractions"]=this["webpackJsonpreact-attractions"]||[]).push([[0],{100:function(e,t){},101:function(e,t){},116:function(e,t,n){},204:function(e,t,n){},207:function(e,t,n){"use strict";n.r(t);var a,c,r=n(0),s=n(11),i=n.n(s),o=(n(116),n(10)),l=n(25),u=n(92),j=n.n(u),d=n(57),b=n(13),p=Object(l.b)({name:"todo",initialState:{todolist:[{id:1,name:"first todo on redux"},{id:2,name:"second todo in list"}]},reducers:{addTodo:function(e,t){e.todolist.push(t.payload)}}}),h=(p.actions.addTodo,p.reducer),x=Object(l.b)({name:"city",initialState:{cityList:[]},reducers:{addCity:function(e,t){e.cityList=t.payload}}}).reducer,O=Object(l.b)({name:"counter",initialState:{value:0},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}}}),f=O.actions,v=(f.increment,f.decrement,f.incrementByAmount,O.reducer),m=Object(l.b)({name:"search",initialState:{searchData:{}},reducers:{setSearchData:function(e,t){e.searchData=t.payload}}}),g=m.actions.setSearchData,y=m.reducer,w=n(43),N={key:"root",storage:j.a},k=Object(b.c)({city:x,todo:h,counter:v,search:y}),C=Object(d.a)(N,k),T=Object(l.a)({reducer:C,middleware:[w.a],whitelist:["cityList","searchData"]}),S=n(93),P=n(21),D=n(8),A=n(9),E=[{value:"activity",label:"\u7bc0\u6176\u6d3b\u52d5"},{value:"spot",label:"\u63a2\u7d22\u666f\u9ede"},{value:"restaurant",label:"\u54c1\u5690\u7f8e\u98df"}],L=[{name:"\u63a2\u7d22\u666f\u9ede",path:"spot"},{name:"\u7bc0\u6176\u6d3b\u52d5",path:"activity"},{name:"\u54c1\u5690\u7f8e\u98df",path:"restaurant"}],z=[{label:"\u81fa\u5317\u5e02",value:"Taipei"},{label:"\u65b0\u5317\u5e02",value:"NewTaipei"},{label:"\u6843\u5712\u5e02",value:"Taoyuan"},{label:"\u81fa\u4e2d\u5e02",value:"Taichung"},{label:"\u81fa\u5357\u5e02",value:"Tainan"},{label:"\u9ad8\u96c4\u5e02",value:"Kaohsiung"},{label:"\u57fa\u9686\u5e02",value:"Keelung"},{label:"\u65b0\u7af9\u5e02",value:"Hsinchu"},{label:"\u65b0\u7af9\u7e23",value:"HsinchuCounty"},{label:"\u82d7\u6817\u7e23",value:"MiaoliCounty"},{label:"\u5f70\u5316\u7e23",value:"ChanghuaCounty"},{label:"\u5357\u6295\u7e23",value:"NantouCounty"},{label:"\u96f2\u6797\u7e23",value:"YunlinCounty"},{label:"\u5609\u7fa9\u7e23",value:"ChiayiCounty"},{label:"\u5609\u7fa9\u5e02",value:"Chiayi"},{label:"\u5c4f\u6771\u7e23",value:"PingtungCounty"},{label:"\u5b9c\u862d\u7e23",value:"YilanCounty"},{label:"\u82b1\u84ee\u7e23",value:"HualienCounty"},{label:"\u81fa\u6771\u7e23",value:"TaitungCounty"},{label:"\u91d1\u9580\u7e23",value:"KinmenCounty"},{label:"\u6f8e\u6e56\u7e23",value:"PenghuCounty"},{label:"\u9023\u6c5f\u7e23",value:"LienchiangCounty"}],M=n(1),I=A.a.header(a||(a=Object(D.a)(["\n  height: 80px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 50px;\n  border-bottom: 1px solid #ccc;\n  h1 {\n    color: var(--green);\n    letter-spacing: 5px;\n    font-size: 20px;\n    cursor: pointer;\n  }\n"]))),B=A.a.ul(c||(c=Object(D.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  li {\n    margin: 0 10px;\n    cursor: pointer;\n  }\n"])));var H,$=function(){var e=Object(o.f)(),t=Object(P.b)(),n=function(n){t(g({type:n})),e.push("/search")};return Object(M.jsxs)(I,{children:[Object(M.jsx)("h1",{onClick:function(){n("/")},children:"\u53f0\u7063\u8d70\u8d70 \u2022 Taiwan"}),Object(M.jsx)(B,{children:L.map((function(e){return Object(M.jsx)("li",{onClick:function(){n(e.path)},children:e.name},e.name)}))})]})},F=A.a.footer(H||(H=Object(D.a)(["\n  height: 60px;\n  line-height: 60px;\n  text-align: center;\n  background-color: var(--green);\n  color: #fff;\n"])));var V,U=function(){return Object(M.jsx)(F,{children:"The F2E 3rd \u53f0\u7063\u65c5\u904a\u666f\u9ede\u5c0e\u89bd"})},Y=A.a.div(V||(V=Object(D.a)(["\n  /* overflow-y: scroll; */\n"])));var _=function(e){return Object(M.jsxs)(Y,{children:[Object(M.jsx)($,{}),Object(M.jsx)("div",{className:"wrapper",children:e.children}),Object(M.jsx)(U,{})]})},K=n(19),R=n.n(K),q=n(7),J=n(30),W=n(12),X=(n(125),n(97));var G,Q=function(){return Object(M.jsx)(X.Carousel,Object(q.a)(Object(q.a)({},{dots:!0,infinite:!0,autoPlay:!0,speed:500,showStatus:!1}),{},{children:["\u5357\u6295 \uff5c \u6e05\u5883\u8fb2\u5834","\u82b1\u84ee \uff5c \u82b1\u6771\u7e31\u8c37","\u9ad8\u96c4 \uff5c \u4e09\u9cf3\u5bae","\u53f0\u5317 \uff5c 101","\u65b0\u5317 \uff5c \u91ce\u67f3"].map((function(e,t){return Object(M.jsx)("div",{className:"carousel-item",style:{backgroundImage:"url(".concat("https://changchiao.github.io/react_attractions","/image/banner/").concat(t,".jpg)")},children:Object(M.jsx)("p",{className:"carousel-title",children:e})},e)}))}))},Z=n(107),ee=A.a.div(G||(G=Object(D.a)(["\n  width: 300px;\n  margin-right: 5px;\n"]))),te=function(e){return Object(q.a)(Object(q.a)({},e),{},{borderRadius:8,colors:Object(q.a)({},e.colors)})},ne={option:function(e,t){return Object(q.a)(Object(q.a)({},e),{},{borderBottom:"1px dotted #ccc",color:t.isSelected?"#333":"#666",padding:10})},control:function(e){return Object(q.a)(Object(q.a)({},e),{},{border:"1px solid #ddd",color:"#ccc"})},singleValue:function(e,t){return Object(q.a)(Object(q.a)({},e),{},{borderRadius:"4px",opacity:t.isDisabled?.5:1})}};var ae,ce=function(e){return Object(M.jsx)(ee,{children:Object(M.jsx)(Z.a,{defaultValue:e.defaultValue,theme:te,styles:ne,onChange:e.onChange,options:e.options})})},re=n(14),se=n(15),ie=A.a.div(ae||(ae=Object(D.a)(["\n  text-align: left;\n  padding: 5% 10%;\n  display: flex;\n  justify-content: center;\n  .area {\n    width: 40%;\n  }\n  .main-title {\n    font-size: 36px;\n    line-height: 50px;\n  }\n  .sub-title {\n    font-size: 16px;\n    padding-top: 20px;\n    color: #646464;\n    svg {\n      color: var(--green_light);\n      margin: 0 5px;\n    }\n    span {\n      color: #646464;\n    }\n  }\n  .search-input {\n    width: 300px;\n    margin-top: 10px;\n  }\n  .search-btn {\n    width: 300px;\n    height: 40px;\n    margin-top: 10px;\n    letter-spacing: 5px;\n    display: block;\n    cursor: pointer;\n    svg {\n      margin-right: 5px;\n      cursor: pointer;\n    }\n  }\n"])));var oe,le=function(){var e=Object(P.b)(),t=Object(o.f)(),n=Object(r.useState)(""),a=Object(W.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(E[1]),l=Object(W.a)(i,2),u=l[0],j=l[1];return Object(M.jsxs)(ie,{children:[Object(M.jsxs)("div",{className:"area",children:[Object(M.jsx)("p",{className:"main-title",children:"\u63a2\u7d22\u53f0\u7063\u4e4b\u7f8e"}),Object(M.jsx)("p",{className:"main-title",children:"\u8b93\u6211\u5011\u66f4\u89aa\u8fd1\u9019\u7247\u571f\u5730"}),Object(M.jsxs)("p",{className:"sub-title",children:[Object(M.jsx)(re.a,{className:"mark",icon:se.c}),"\u53f0\u7063\u65c5\u904a\u666f\u9ede\u5c0e\u89bd ",Object(M.jsx)("span",{children:"Taiwan Travel Guide"})]})]}),Object(M.jsxs)("div",{className:"area",children:[Object(M.jsx)(ce,{defaultValue:u,onChange:j,options:E}),Object(M.jsx)("input",{className:"search-input",placeholder:"\u4f60\u60f3\u53bb\u54ea\u88e1\uff1f\u8acb\u8f38\u5165\u95dc\u9375\u5b57",value:c,onChange:function(e){s(e.target.value)}}),Object(M.jsxs)("button",{className:"search-btn",onClick:function(){var n={keyword:c,type:null===u||void 0===u?void 0:u.value};e(g(n)),t.push("/search")},children:[Object(M.jsx)(re.a,{className:"mark",icon:se.d}),"\u641c\u5c0b"]})]})]})},ue=n(45),je=n(98),de=(Object(je.a)({forceRefresh:!0}),function(e){var t=new Date(e),n=t.getFullYear(),a=t.getMonth()+1,c=t.getDate();return"".concat(n,"/").concat(a,"/").concat(c)}),be=A.a.div(oe||(oe=Object(D.a)(["\n  width: 49%;\n  cursor: pointer;\n  display: flex;\n  overflow: hidden;\n  border: 1px solid var(--line);\n  border-radius: 12px;\n  margin-top: 10px;\n  background-color: var(--gray);\n  transition-duration: 0.3s;\n  &:hover {\n    transform: translate(2px, 2px);\n    background: #eee;\n  }\n  img {\n    width: 150px;\n    object-fit: cover;\n  }\n  .text {\n    flex: 1;\n    padding: 10px 14px;\n    position: relative;\n  }\n  .bottom-info {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    position: absolute;\n    width: 90%;\n    bottom: 10px;\n  }\n"])));var pe=function(e){var t=e.data,n=Object(o.f)();return Object(M.jsxs)(be,{onClick:function(){n.push({pathname:"/intro",state:t})},children:[Object(M.jsx)("img",{src:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.PictureUrl1;return t||"https://changchiao.github.io/react_attractions/image/default/act.jpg"}(t.Picture)}),Object(M.jsxs)("div",{className:"text",children:[Object(M.jsx)("p",{className:"date",children:"".concat(de(t.StartTime),"-").concat(de(t.EndTime))}),Object(M.jsx)("p",{className:"item-title",children:t.Name}),Object(M.jsxs)("p",{className:"bottom-info",children:[Object(M.jsxs)("span",{className:"location",children:[Object(M.jsx)(re.a,{className:"mark",icon:se.c}),"\u5357\u6295\u7e23 ",t.Address]}),Object(M.jsxs)("span",{className:"intro",children:["\u8a73\u7d30\u4ecb\u7d39",Object(M.jsx)(re.a,{className:"mark",icon:se.a})]})]})]})]})},he=n(108),xe=n(99),Oe=n.n(xe).a.create({headers:function(){var e=(new Date).toGMTString(),t=new he.a("SHA-1","TEXT");t.setHMACKey("daVxLDO01nPgTTwhQKVBmY-pjeQ","TEXT"),t.update("x-date: "+e);var n=t.getHMAC("B64");return{Authorization:'hmac username="'.concat("b65665fcca144956a79d25bb3edc7b34",'", algorithm="hmac-sha1", headers="x-date", signature="').concat(n,'"'),"X-Date":e,"Content-Type":"application/x-www-form-urlencoded"}}()});Oe.interceptors.request.use((function(e){var t=e.params;return Object.keys(t).map((function(e){t[e]||delete t[e]})),e}),(function(e){return e})),Oe.interceptors.response.use((function(e){return e.data}),(function(e){var t=e.response.status;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";e&&("error"===t&&ue.b.error(e),"success"===t&&ue.b.success(e))}("error--".concat(t),"error"),Promise.reject(e)}));var fe,ve=Oe,me=function(e){var t=e.city;return delete e.city,{cityPath:t,data:e}},ge=function(e){var t=me(e),n=t.cityPath,a=void 0===n?"":n,c=t.data;return ve.get("https://ptx.transportdata.tw/MOTC/v2/Tourism/Restaurant"+"/".concat(a),{params:Object(q.a)({},c)})},ye=function(e){var t=me(e),n=t.cityPath,a=void 0===n?"":n,c=t.data;return ve.get("https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot"+"/".concat(a),{params:Object(q.a)({},c)})},we=function(e){var t=me(e),n=t.cityPath,a=void 0===n?"":n,c=t.data;return ve.get("https://ptx.transportdata.tw/MOTC/v2/Tourism/Activity"+"/".concat(a),{params:Object(q.a)({},c)})},Ne=A.a.div(fe||(fe=Object(D.a)(["\n  margin-top: 30px;\n  .title-bar {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    svg {\n      margin-left: 5px;\n    }\n  }\n  .list {\n    display: flex;\n    justify-content: space-between;\n    flex-wrap: wrap;\n    margin-top: 10px;\n  }\n"])));var ke,Ce=function(){var e=Object(r.useState)([]),t=Object(W.a)(e,2),n=t[0],a=t[1],c=function(){var e=Object(J.a)(R.a.mark((function e(){var t,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={$top:4,$orderBy:"EndTime desc"},e.next=3,we(t);case 3:n=e.sent,a(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){c()}),[]),Object(M.jsxs)(Ne,{children:[Object(M.jsxs)("div",{className:"title-bar",children:[Object(M.jsx)("h3",{class:"title",children:"\u8fd1\u671f\u6d3b\u52d5"}),Object(M.jsxs)("span",{class:"more",children:["\u67e5\u770b\u66f4\u591a\u6d3b\u52d5",Object(M.jsx)(re.a,{className:"mark",icon:se.a})]})]}),Object(M.jsx)("div",{className:"list",children:n.map((function(e){return Object(M.jsx)(pe,{data:Object(q.a)(Object(q.a)({},e),{},{type:"activity"})},e.ID)}))})]})},Te=A.a.div(ke||(ke=Object(D.a)(["\n  width: 24%;\n  cursor: pointer;\n  transition-duration: 0.3s;\n  &:hover {\n    transform: translate(2px, 2px);\n  }\n  .cover {\n    border-radius: 20px;\n    height: 200px;\n    object-fit: cover;\n    margin-bottom: 10px;\n    display: block;\n    width: 100%;\n  }\n  .location {\n    margin-bottom: 10px;\n    text-align: left;\n    padding: 10px 0;\n  }\n"])));var Se,Pe=function(e){var t=e.data,n=Object(o.f)();return Object(M.jsxs)(Te,{onClick:function(){n.push({pathname:"/intro",state:t})},children:[Object(M.jsx)("img",{className:"cover",src:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.PictureUrl1;return t||"https://changchiao.github.io/react_attractions/image/default/act.jpg"}(t.Picture)}),Object(M.jsx)("p",{className:"item-title",children:t.Name}),Object(M.jsxs)("p",{className:"location",children:[Object(M.jsx)(re.a,{className:"mark",icon:se.c}),t.Address&&t.Address.substring(0,3)]})]})},De=A.a.div(Se||(Se=Object(D.a)(["\n  margin-top: 50px;\n  .title-bar {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    svg {\n      margin-left: 5px;\n    }\n  }\n  .list {\n    display: flex;\n    justify-content: space-between;\n    flex-wrap: wrap;\n    margin-top: 16px;\n  }\n"])));var Ae=function(e){var t=e.data,n=Object(o.f)(),a=Object(P.b)();return Object(M.jsxs)(De,{children:[Object(M.jsxs)("div",{className:"title-bar",children:[Object(M.jsx)("h3",{className:"title",children:t.title}),Object(M.jsxs)("span",{className:"more",onClick:function(){var e={type:null===t||void 0===t?void 0:t.type};a(g(e)),n.push("/search")},children:["\u67e5\u770b\u66f4\u591a\u6d3b\u52d5",Object(M.jsx)(re.a,{className:"mark",icon:se.a})]})]}),Object(M.jsx)("div",{className:"list",children:t.list&&t.list.map((function(e){return Object(M.jsx)(Pe,{data:Object(q.a)(Object(q.a)({},e),{},{type:t.type})},e.ID)}))})]})};var Ee=function(){var e=Object(r.useState)({title:"\u71b1\u9580\u6253\u5361\u666f\u9ede",type:"spot",list:[]}),t=Object(W.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)({title:"\u4e00\u518d\u56de\u8a2a\u7f8e\u98df",type:"restaurant",list:[]}),s=Object(W.a)(c,2),i=s[0],o=s[1],l=function(){var e=Object(J.a)(R.a.mark((function e(){var t,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={$top:4},e.next=3,ye(t);case 3:n=e.sent,a((function(e){return Object(q.a)(Object(q.a)({},e),{},{list:n})}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(J.a)(R.a.mark((function e(){var t,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={$top:4},e.next=3,ge(t);case 3:n=e.sent,o((function(e){return Object(q.a)(Object(q.a)({},e),{},{list:n})}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){l(),u()}),[]),Object(M.jsxs)("div",{children:[Object(M.jsx)(le,{}),Object(M.jsx)(Q,{}),Object(M.jsx)(Ce,{}),Object(M.jsx)(Ae,{data:n}),Object(M.jsx)(Ae,{data:i})]})};var Le=function(){return Object(M.jsx)("div",{})},ze=n(100),Me=n.n(ze),Ie=n(101),Be=n.n(Ie),He=n(109),$e=function(){return Object(M.jsx)(re.a,{className:"mark",icon:se.c})};var Fe=function(e){var t=e.Position,n=void 0===t?{}:t;return console.log("Position",n),Object(M.jsx)("div",{style:{height:"100%",width:"100%"},children:Object(M.jsx)(He.a,{defaultCenter:{lat:n.PositionLat||"22.63",lng:n.PositionLon||"121.5073"},defaultZoom:12,children:Object(M.jsx)($e,{lat:n.PositionLat,lng:n.PositionLon})})})};var Ve=function(e){var t=e.data;return Object(M.jsxs)("div",{className:"detail",children:[Object(M.jsxs)("p",{children:[Object(M.jsx)("h3",{className:"focus",children:"\u6d3b\u52d5\u6642\u9593:"}),"".concat(de(t.StartTime),"-").concat(de(t.EndTime))]}),Object(M.jsxs)("p",{children:[Object(M.jsx)("h3",{className:"focus",children:"\u4e3b\u8fa6\u55ae\u4f4d:"}),t.Organizer]}),Object(M.jsxs)("p",{children:[Object(M.jsx)("h3",{className:"focus",children:"\u6d3b\u52d5\u5730\u9ede:"}),t.Address]})]})};var Ue=function(e){var t=e.data;return Object(M.jsxs)("div",{className:"detail",children:[Object(M.jsxs)("p",{children:[Object(M.jsx)("h3",{className:"focus",children:"\u71df\u696d\u6642\u9593:"}),t.OpenTime]}),Object(M.jsxs)("p",{children:[Object(M.jsx)("h3",{className:"focus",children:"\u806f\u7d61\u96fb\u8a71:"}),Object(M.jsx)("a",{href:"tel:".concat(t.Phone),children:t.Phone})]}),Object(M.jsxs)("p",{children:[Object(M.jsx)("h3",{className:"focus",children:"\u9910\u5ef3\u5730\u5740:"}),t.Address]}),Object(M.jsxs)("p",{children:[Object(M.jsx)("h3",{className:"focus",children:"\u5b98\u65b9\u7db2\u7ad9:"}),t.WebsiteUrl?Object(M.jsx)("a",{href:t.WebsiteUrl,target:"_blank",rel:"noreferrer",children:t.WebsiteUrl}):Object(M.jsx)("span",{children:"\u7121"})]})]})};var Ye,_e,Ke=function(e){var t=e.data;return Object(M.jsxs)("div",{className:"detail",children:[Object(M.jsxs)("p",{children:[Object(M.jsx)("h3",{className:"focus",children:"\u958b\u653e\u6642\u9593:"}),t.OpenTime]}),Object(M.jsxs)("p",{children:[Object(M.jsx)("h3",{className:"focus",children:"\u670d\u52d9\u96fb\u8a71:"}),Object(M.jsx)("a",{href:"tel:".concat(t.Phone),children:t.Phone})]}),Object(M.jsxs)("p",{children:[Object(M.jsx)("h3",{className:"focus",children:"\u666f\u9ede\u5730\u5740:"}),t.Address]}),Object(M.jsxs)("p",{children:[Object(M.jsx)("h3",{className:"focus",children:"\u7968\u50f9\u8cc7\u8a0a:"}),t.TicketInfo]}),Object(M.jsxs)("p",{children:[Object(M.jsx)("h3",{className:"focus",children:"\u6ce8\u610f\u4e8b\u9805:"}),t.Remarks||"\u7121"]})]})},Re=A.a.div(Ye||(Ye=Object(D.a)(["\n  padding-bottom: 20px;\n  font-size: 14px;\n  .crumb-text {\n    color: var(--green);\n  }\n  strong {\n    color: var(--green);\n    margin: 0 5px;\n  }\n"])));function qe(e){var t=e.type,n=e.title;return Object(M.jsxs)(Re,{children:[Object(M.jsx)("span",{className:"crumb-text",children:t}),Object(M.jsx)("strong",{children:"/"}),Object(M.jsx)("span",{className:"crumb-text",children:n})]})}var Je=A.a.div(_e||(_e=Object(D.a)(["\n  margin-top: 30px;\n  .main-cover {\n    width: 100%;\n    height: 400px;\n    object-fit: cover;\n    border-radius: 20px;\n  }\n  .intro-title {\n    font-size: 32px;\n    padding: 20px 0 16px;\n  }\n  .tag {\n    color: var(--brown);\n    font-size: 14px;\n    padding: 5px;\n    border-radius: 20px;\n    margin-right: 5px;\n    border: 1px solid var(--brown);\n  }\n  .content {\n    padding: 30px 0 20px;\n    h3 {\n      padding-bottom: 14px;\n    }\n    p {\n      line-height: 24px;\n    }\n  }\n  .intro {\n    display: flex;\n    justify-content: space-between;\n  }\n  .map {\n    width: 48%;\n  }\n  .detail {\n    width: 48%;\n    background: #f9f9f9;\n    border-radius: 20px;\n    padding: 20px 10px;\n    p {\n      padding: 8px 0;\n      display: flex;\n      line-height: 20px;\n      .focus {\n        margin-right: 5px;\n        word-break: keep-all;\n      }\n    }\n    a {\n      word-break: break-all;\n      color: var(--green);\n    }\n  }\n"])));var We=function(){var e=Object(o.g)().state,t=Object(r.useState)({}),n=Object(W.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)({}),i=Object(W.a)(s,2),l=i[0],u=i[1],j=Object(r.useState)([]),d=Object(W.a)(j,2),b=d[0],p=d[1],h=Object(r.useState)(""),x=Object(W.a)(h,2),O=x[0],f=x[1],v=function(){var t=Object(J.a)(R.a.mark((function t(){var n,c,r;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={$top:4},c="",r=[],setTimeout((function(){console.log("data.type",a.type),console.log("state",e)}),3e3),t.t0=a.type,t.next="activity"===t.t0?7:"spot"===t.t0?12:17;break;case 7:return c="\u6d3b\u52d5",t.next=10,we(n);case 10:return r=t.sent,t.abrupt("break",22);case 12:return c="\u666f\u9ede",t.next=15,ye(n);case 15:return r=t.sent,t.abrupt("break",22);case 17:return c="\u9910\u5ef3",t.next=20,ge(n);case 20:return r=t.sent,t.abrupt("break",22);case 22:f(c),u({title:"\u9084\u6709\u9019\u4e9b\u4e0d\u80fd\u932f\u904e\u7684"+c,list:r});case 24:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),m=function(){switch(a.type){case"activity":return Object(M.jsx)(Ve,{data:a});case"spot":return Object(M.jsx)(Ke,{data:a});default:return Object(M.jsx)(Ue,{data:a})}};return Object(r.useEffect)((function(){!function(){if(e)localStorage.setItem("intro",JSON.stringify(e)),c(e);else{var t=localStorage.getItem("intro");c(JSON.parse(t))}}()}),[]),Object(r.useEffect)((function(){v(),function(){for(var e=[],t=0,n=Object.entries(a);t<n.length;t++){var c=Object(W.a)(n[t],2),r=c[0],s=c[1];r.includes("Class")&&e.push("#".concat(s))}0===e.length&&e.push("#\u71b1\u9580\u6253\u5361"),p(e)}()}),[a]),Object(M.jsxs)(Je,{children:[Object(M.jsx)(qe,{type:a.type?E.find((function(e){return e.value===a.type})).label:"",title:a.Name}),Object(M.jsx)("img",{className:"main-cover",src:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.PictureUrl1;return t||"https://changchiao.github.io/react_attractions/image/default/act.jpg"}(a.Picture)}),Object(M.jsx)("h2",{className:"intro-title",children:a.Name}),Object(M.jsx)("div",{className:"tag-group",children:b.map((function(e){return Object(M.jsx)("span",{className:"tag",children:e},e)}))}),Object(M.jsxs)("div",{className:"content",children:[Object(M.jsxs)("h3",{className:"focus",children:[O,"\u4ecb\u7d39:"]}),Object(M.jsx)("p",{children:"spot"===a.type?a.DescriptionDetail:a.Description})]}),Object(M.jsxs)("div",{className:"intro",children:[Object(M.jsx)(m,{}),Object(M.jsx)("div",{className:"map",children:Object(M.jsx)(Fe,{Position:a.Position})})]}),Object(M.jsx)(Ae,{data:l})]})},Xe=n(74);var Ge=function(e){var t=e.setCity,n=e.city;return Object(M.jsx)(ce,{defaultValue:n,onChange:t,options:z})},Qe=n(104),Ze=n.n(Qe),et=n(103),tt=n.n(et);var nt,at=function(){var e=tt()({onOpen:function(e){e.portal.current.style.cssText="\n            /* add your css here for the Portal */\n            position: fixed;\n            width: 100vw;\n            height: 100vh;\n            transform: translate(-50%,-50%);\n            z-index: 1000;\n          "}}).Portal;return Object(M.jsx)(e,{children:Object(M.jsx)("div",{class:"load",children:Object(M.jsxs)("div",{class:"load-container",children:[Object(M.jsx)("div",{class:"l-1 letter",children:"L"}),Object(M.jsx)("div",{class:"l-2 letter",children:"o"}),Object(M.jsx)("div",{class:"l-3 letter",children:"a"}),Object(M.jsx)("div",{class:"l-4 letter",children:"d"}),Object(M.jsx)("div",{class:"l-5 letter",children:"i"}),Object(M.jsx)("div",{class:"l-6 letter",children:"n"}),Object(M.jsx)("div",{class:"l-7 letter",children:"g"}),Object(M.jsx)("div",{class:"l-8 letter",children:"."}),Object(M.jsx)("div",{class:"l-9 letter",children:"."}),Object(M.jsx)("div",{class:"l-10 letter",children:"."})]})})})};var ct=function(){var e=!1,t=0,n=Object(P.b)(),a=Object(r.useState)([]),c=Object(W.a)(a,2),s=c[0],i=c[1],o=Object(r.useState)(""),l=Object(W.a)(o,2),u=l[0],j=l[1],d=Object(r.useState)(""),b=Object(W.a)(d,2),p=b[0],h=b[1],x=Object(r.useState)(new Date),O=Object(W.a)(x,2),f=O[0],v=O[1],m=Object(r.useState)(!1),y=Object(W.a)(m,2),w=y[0],N=y[1],k=Object(P.c)((function(e){return e.search.searchData})),C=A.a.div(nt||(nt=Object(D.a)(["\n    padding-top: 50px;\n    .search-bar {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      .search-input {\n        flex: 1;\n        min-height: 42px;\n        margin-right: 5px;\n      }\n      .search-btn {\n        width: 160px;\n        height: 40px;\n        letter-spacing: 5px;\n        display: block;\n        cursor: pointer;\n        svg {\n          margin-right: 5px;\n          cursor: pointer;\n        }\n      }\n    }\n    .search-result {\n      &-text {\n        padding: 50px 0 20px;\n        font-weight: normal;\n        font-size: 28px;\n        span {\n          padding-left: 6px;\n          font-size: 16px;\n          strong {\n            color: #949142;\n          }\n        }\n      }\n      &-list {\n        display: flex;\n        justify-content: space-between;\n        flex-wrap: wrap;\n        svg {\n          color: var(--green);\n        }\n      }\n    }\n  "]))),T=function(){return E.find((function(e){return e.value===k.type})).label},S=function(){t=0,e=!1,i([])},L=function(){var n=Object(J.a)(R.a.mark((function n(){var a,c,r,s,o,l,u;return R.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=[],c=k.keyword,r=k.city,console.log("startDate",f),11,2021,s=c?"Name eq '".concat(c,"'"):"",o="month(StartTime) eq ".concat(11),l="year(StartTime) eq ".concat(2021),u={$top:30,$skip:t,$filter:(j=[s,o,l],j.filter((function(e){return""!==e})).join(" and ")),city:null===r||void 0===r?void 0:r.value},N(!0),n.t0=k.type,n.next="activity"===n.t0?12:"spot"===n.t0?16:20;break;case 12:return n.next=14,we(u);case 14:return a=n.sent,n.abrupt("break",24);case 16:return n.next=18,ye(u);case 18:return a=n.sent,n.abrupt("break",24);case 20:return n.next=22,ge(u);case 22:return a=n.sent,n.abrupt("break",24);case 24:N(!1),0===a.length?e=!0:i((function(e){return[].concat(Object(Xe.a)(e),Object(Xe.a)(a))}));case 26:case"end":return n.stop()}var j}),n)})));return function(){return n.apply(this,arguments)}}(),z=function(){e||(t+=30,L(),console.log("3333"))};return Object(r.useEffect)((function(){window.onscroll=function(){window.innerHeight+window.pageYOffset>=document.body.offsetHeight&&(console.log("At the bottom!"),z())}}),[]),Object(r.useEffect)((function(){T(),L(),console.log("2222")}),[k]),Object(M.jsxs)(C,{children:[w&&Object(M.jsx)(at,{}),Object(M.jsx)(qe,{type:"\u9996\u9801",title:T()}),Object(M.jsxs)("div",{className:"search-bar",children:[Object(M.jsx)(Ge,{setCity:j,city:u}),"activity"===k.type&&Object(M.jsx)(Ze.a,{selected:f,onChange:function(e){return v(e)},dateFormat:"MM/yyyy",showMonthYearPicker:!0}),Object(M.jsx)("input",{className:"search-input",placeholder:"".concat({activity:"\u4f60\u60f3\u73a9\u4ec0\u9ebc\uff1f",spot:"\u4f60\u60f3\u53bb\u54ea\u88e1\uff1f",restaurant:"\u4f60\u60f3\u5403\u4ec0\u9ebc\uff1f"}[k.type],"\u8acb\u8f38\u5165\u95dc\u9375\u5b57"),value:p,onChange:function(e){h(e.target.value)}}),Object(M.jsxs)("button",{className:"search-btn",onClick:function(){var e={keyword:p,city:null===u||void 0===u?void 0:u.value,type:k.type};console.log("dataObj",e),S(),n(g(e))},children:[Object(M.jsx)(re.a,{icon:se.d}),"\u641c\u5c0b"]})]}),Object(M.jsxs)("div",{className:"search-result",children:[Object(M.jsxs)("h3",{className:"search-result-text",children:["\u641c\u5c0b\u7d50\u679c",Object(M.jsxs)("span",{children:["\u5171\u6709",Object(M.jsx)("strong",{children:s.length}),"\u7b46"]})]}),Object(M.jsxs)("div",{className:"search-result-list",children:[s.map((function(e){return Object(M.jsx)(Pe,{data:Object(q.a)(Object(q.a)({},e),{},{type:k.type})},e.ID)})),0===s.length&&Object(M.jsxs)("div",{children:["\u3000",Object(M.jsx)(re.a,{icon:se.b}),Object(M.jsx)("p",{children:"\u67e5\u7121\u8cc7\u6599"}),Object(M.jsx)("p",{children:"\u8acb\u91cd\u65b0\u67e5\u8a62"})]})]})]})]})},rt=Object(d.b)(T);var st=function(){return Object(M.jsx)(P.a,{store:T,children:Object(M.jsx)(S.a,{loading:null,persistor:rt,children:Object(M.jsxs)("div",{className:"App",children:[Object(M.jsxs)(_,{children:[Object(M.jsx)(o.a,{path:"/",exact:!0,component:Ee}),Object(M.jsx)(o.a,{path:"/search",exact:!0,component:ct}),Object(M.jsx)(o.a,{path:"/attraction",component:Le}),Object(M.jsx)(o.a,{path:"/festival",component:Me.a}),Object(M.jsx)(o.a,{path:"/food",component:Be.a}),Object(M.jsx)(o.a,{path:"/intro",component:We})]}),Object(M.jsx)(ue.a,{})]})})})},it=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,214)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))},ot=n(32);n(204),n(205);i.a.render(Object(M.jsx)(ot.a,{children:Object(M.jsx)(o.c,{children:Object(M.jsx)(st,{})})}),document.getElementById("root")),it()}},[[207,1,2]]]);
//# sourceMappingURL=main.21dd6bd2.chunk.js.map